{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getOffset = getOffset;\nexports.getMoment = getMoment;\nexports.getNumberOfCells = getNumberOfCells;\nexports.getIntervalsByDuration = getIntervalsByDuration;\nexports.getDayIntervals = getDayIntervals;\nexports.getIntervals = getIntervals;\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction getOffset(time) {\n  var midnight = (0, _moment2.default)(time).startOf('day');\n  return time.diff(midnight, 'm');\n}\n\nfunction getMoment(duration, numberOfUnits) {\n  var offset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n  if (duration * numberOfUnits + offset >= 24 * 60) {\n    return (0, _moment2.default)({\n      h: 23,\n      m: 59\n    });\n  }\n\n  return (0, _moment2.default)({\n    h: 0,\n    m: 0\n  }).add(duration * numberOfUnits + offset, 'm');\n}\n\nfunction getNumberOfCells(time, duration, isUpRound) {\n  var offset = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n  var midnight = (0, _moment2.default)(time).startOf('day').add(offset, 'm');\n  var testTime = (0, _moment2.default)(time);\n\n  if (testTime.format('HH:mm') === '23:59') {\n    testTime.add(1, 'm');\n  }\n\n  var result = isUpRound ? Math.ceil(testTime.diff(midnight, 'm') / duration) : Math.floor(testTime.diff(midnight, 'm') / duration);\n\n  if (result < 0) {\n    return 0;\n  }\n\n  return result;\n}\n\nfunction getIntervalsByDuration(duration, startTime, endTime) {\n  var startIndex = getNumberOfCells(startTime, duration, false);\n  var endIndex = getNumberOfCells(endTime, duration, true);\n  var start = (0, _moment2.default)({\n    h: 0,\n    m: 0\n  }).add(duration * startIndex, 'm');\n  var end = void 0;\n  var result = [];\n\n  for (var i = startIndex; i < endIndex; i += 1) {\n    end = start.clone().add(duration, 'm');\n    var interval = {\n      start: start,\n      end: end\n    };\n    result.push(interval);\n    start = end;\n  }\n\n  var lastElement = result.pop();\n\n  if (lastElement.end.format('HH:mm') === '00:00') {\n    lastElement = {\n      start: lastElement.start,\n      end: (0, _moment2.default)({\n        hour: 23,\n        minute: 59\n      })\n    };\n  }\n\n  result.push(lastElement);\n  return result;\n}\n\nfunction getDayIntervals(day, scaleIntervals) {\n  return scaleIntervals.map(function (scaleInterval) {\n    var start = (0, _moment2.default)(day).hour(scaleInterval.start.hour()).minute(scaleInterval.start.minute()).second(0);\n    var end = (0, _moment2.default)(day).hour(scaleInterval.end.hour()).minute(scaleInterval.end.minute()).second(0);\n    return {\n      start: start,\n      end: end\n    };\n  });\n}\n\nfunction getIntervals(start, end) {\n  var diffDays = end.diff(start, 'days');\n  var result = [];\n\n  for (var i = 0; i <= diffDays; i += 1) {\n    var startInterval = (0, _moment2.default)(start).add(i, 'day');\n    var endInterval = (0, _moment2.default)(start).add(i, 'day').hour(end.hour()).minute(end.minute()).second(0);\n    result.push({\n      start: startInterval,\n      end: endInterval\n    });\n  }\n\n  return result;\n}","map":null,"metadata":{},"sourceType":"script"}