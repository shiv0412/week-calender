import React from 'react';
import PropTypes from 'prop-types';

const propTypes = {
  date: PropTypes.object.isRequired,
  dayFormat: PropTypes.string.isRequired,
  selectedIntervals:PropTypes.any
};


class HeaderCell extends React.PureComponent {  
  state={
    isActive:"",
   }

   shouldComponentUpdate(nextProps) {
    // for columnDimensions return new object
    return  !nextProps.selectedIntervals.length !== this.props.selectedIntervals.length;
  }


  render() {
    const {
      date,
      dayFormat,
      selectedIntervals
    } = this.props;
  
    const isEventAnyScheduled = selectedIntervals.filter((events)=>{
      return events.start._d.toString().substr(0, 15) === date._d.toString().substr(0, 15);
    }) 
    console.log("is any event scheduled",isEventAnyScheduled);

    return (
    <>
    <div style={{paddingTop:"18px"}}>
      <div className={this.state.isActive.toString() === date.format(dayFormat).split(",")[1].toString() ? "titleContnetContainerActive":'titleContnetContainer'}>
        <p className="title titleContent" >{date.format(dayFormat).split(",")[0]}</p>
        <p className="title titleContent" id="paragraph" style={{padding:"8px 0 0 0",cursor:"pointer"}} onClick={(e)=>{this.setState({isActive:e.target.innerText})}}>{date.format(dayFormat).split(",")[1]}</p>
    </div>
    {isEventAnyScheduled.length > 0 ? <span style={{color:"orange",display:"block",fontSize:"20px",textAlign:"center",padding:"0",margin:"0"}}>&#9679;</span>:<span style={{color:"orange",display:"block",fontSize:"20px",textAlign:"center",padding:"0",margin:"0"}}>&nbsp;</span>}
    </div>
    </>
    );
  }
}

HeaderCell.propTypes = propTypes;
export default HeaderCell;
